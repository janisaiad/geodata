\usepackage{color}
\usepackage{xcolor}
\usepackage{bm}

\usepackage{algorithm,setspace}
\usepackage{algorithmic}
% \usepackage[noend]{algpseudocode}
% \algtext*{EndFor}% Remove "end while" text
% \algtext*{EndWhile}% Remove "end while" text
% \algtext*{EndIf}% Remove "end if" text
\usepackage{caption}

% todo, comments
\newcommand{\todo}[1]{{\color{blue} [Todo: #1]}}
\newcommand{\qstn}[1]{{\color{magenta} [Question: #1]}}

\newcommand{\VectMode}[1]{\mathrm{\textbf{\upshape #1}}}

% Out of memory messages
\definecolor{oma}{RGB}{0,100,0}
\newcommand{\oma}[1]{\textcolor{oma}{#1}}
\definecolor{omb}{RGB}{0,0,200}
\newcommand{\omb}[1]{\textcolor{omb}{#1}}

%%% constant vector
\newcommand{\ones}{\mathds{1}}

% Set of Radon Measure 
% \Mm
\newcommand{\Mmp}{\mathcal{M}^+}
\newcommand{\Mmpo}{\mathcal{M}^+_1}
\newcommand{\Mmpp}{\mathcal{M}^{+*}}
% Simplex of histogram
\newcommand{\simplex}{\Si}
\newcommand{\diam}{\text{diam}}
% input measure 
%\renewcommand{\mu}{\al}
%\renewcommand{\nu}{\nu}
% input histograms
\renewcommand{\a}{\VectMode{a}}
\renewcommand{\b}{\VectMode{b}}
% input spaces
\newcommand{\X}{X}
\newcommand{\Y}{Y}
% ground distance
\newcommand{\dist}{d}
\newcommand{\distD}{\VectMode{D}} % discrete matrix
% Monge map
\newcommand{\T}{T}


%\newcommand{\d}{\text{d}}
\newcommand{\R}{\mathbb{R}}


\newcommand{\W}{\text{\upshape{OT}}}
\newcommand{\F}{\text{\upshape{F}}}
\renewcommand{\H}{\text{\upshape{H}}}
\newcommand{\E}{\text{\upshape{E}}}
\newcommand{\Wb}{\text{\upshape{S}}}
\renewcommand{\S}{\text{\upshape{S}}}
\newcommand{\Dsym}{\mathcal{D}^\text{sym}}

% Reference measure
\renewcommand{\ga}{\gamma}
% Standard entropy
\newcommand{\Ent}{\text{\upshape{Ent}}}
% Primal problem
\newcommand{\OT}{\text{\upshape{OT}}}
\newcommand{\OTb}{\text{\upshape{OT}}_\epsilon}
\newcommand{\OTu}{\text{\upshape{OT}}_{\epsilon,\rho}}
\newcommand{\Sb}{\text{\upshape{S}}_\epsilon}
\newcommand{\Fb}{\text{\upshape{F}}_\epsilon}
\newcommand{\Hb}{\text{\upshape{H}}_\epsilon}

% coupling measure / matrice
% \pi
\renewcommand{\P}{\VectMode{P}}
\newcommand{\Q}{\VectMode{Q}}
\newcommand{\p}{\VectMode{p}}
% set of admissible couplings 
\newcommand{\Couplings}{\Uu}
\newcommand{\CouplingsD}{\VectMode{U}}
% cost / matrix cost
\let\cedil\c
\renewcommand{\c}{C}
\newcommand{\C}{\text{\upshape{C}}}
\renewcommand{\CC}{\textbf{\upshape{C}}}
%\newcommand{\C}{\VectMode{C}}
\newcommand{\cc}{\VectMode{c}}
% dual vectors and 
\newcommand{\fD}{\VectMode{f}} 
\newcommand{\gD}{\VectMode{g}}
\newcommand{\hD}{\VectMode{h}}

% Softmin
\newcommand{\Smin}[1]{ \text{\upshape{Smin}}_{#1~}^{\epsilon} }
\newcommand{\mine}[1]{\underset{#1~}{\text{\upshape{min}}_\epsilon}~}

%%% associated dual continuous functions
\newcommand{\f}{f} 
\newcommand{\g}{g}
\renewcommand{\b}{b} 
\renewcommand{\a}{a}
\newcommand{\ab}{\f,\g}
\newcommand{\efgc}[1]{e^{\frac{#1 -\C}{\epsilon}}}
\newcommand{\tefgc}{ e^{ (\f\oplus\g - \C) / \epsilon} }
\newcommand{\fefgc}{ e^{ \frac{\f\oplus\g -\C}{\epsilon} } }
%%% set of valid dual potentials
\newcommand{\PotentialsD}{\VectMode{R}}
\newcommand{\Potentials}{\Rr}
%%% wasserstein *distance* (associated to the power of a distance, usually \Wass_p (clash with \p...)
\DeclareMathOperator{\Wass}{\mathcal{W}}
\DeclareMathOperator{\WassD}{\mathrm{W}} % discrete
% value associated to some cost c
\newcommand{\MK}{\mathcal{L}}
\newcommand{\MKD}{\mathrm{L}} % discrete

%%% Sinkhorn
\newcommand{\uD}{\VectMode{u}} % exponential scalings
\newcommand{\vD}{\VectMode{v}} 
\DeclareMathOperator{\LSE}{LSE} % log-sum-exp
\newcommand{\K}{\VectMode{K}} % Gibbs kernel
\renewcommand{\k}{\VectMode{k}} % Gibbs kernel
\newcommand{\logP}{\VectMode{S}} % log of the Gibbs kernel
\newcommand{\Hilbert}{d_\Hh} % hilbert projective metric

\renewcommand{\T}{\text{\upshape{T}}}
\renewcommand{\t}[1]{#1^\top}

\newcommand{\PHI}{\bm{\phi}}
\newcommand{\PSI}{\bm{\psi}}

\renewcommand{\GG}{\textbf{\upshape{G}}}
\renewcommand{\LL}{\textbf{\upshape{L}}}
\newcommand{\OOTT}{\textbf{\upshape{OT}}}
\newcommand{\HH}{\textbf{\upshape{H}}}
\renewcommand{\SS}{\textbf{\upshape{S}}}
\renewcommand{\De}{\Delta}
\newcommand{\AL}{\bm{\al}}
\newcommand{\A}{\bm{a}}
\renewcommand{\AA}{\textbf{\upshape{A}}}
\newcommand{\BE}{\bm{\be}}
\newcommand{\B}{\bm{b}}
\newcommand{\BB}{\textbf{\upshape{B}}}
\renewcommand{\X}{\bm{x}}
\renewcommand{\Y}{\bm{y}}
\renewcommand{\P}{\bm{p}}

\newcommand{\PI}{\bm{\pi}}

\newcommand{\M}{\text{\upshape{M}}}
\newcommand{\N}{\text{\upshape{N}}}
\newcommand{\D}{\text{\upshape{D}}}
\renewcommand{\K}{\text{\upshape{K}}}

%%% Densities
\newcommand{\density}[1]{\rho_{#1}} % density with respect to Lebesgue
\newcommand{\cumul}[1]{\Cc_{#1}}

%%% Dynamic
\newcommand{\speed}{v} % speed 
\newcommand{\Moment}{J} % momentum
\newcommand{\MomentD}{\VectMode{J}} % momentum
\newcommand{\BBConstr}{\Cc} % div constraints 
\newcommand{\BBConstrD}{\VectMode{C}}
\newcommand{\InterpBB}{\Ii} % interpolation operators


%%% Proj and Prox
% \DeclareMathOperator{\Prox}{Prox}
% \DeclareMathOperator{\aprox}{aprox}
\DeclareMathOperator{\Proj}{Proj}

%%% Ambient dimension
\renewcommand{\dim}{d}

% permutation
\newcommand{\Perm}{\mathrm{Perm}}

%%% W1 flow
\newcommand{\flow}{f}
\newcommand{\flowD}{\VectMode{f}}

%% graphs
\newcommand{\Edges}{\Ee}
\newcommand{\weight}{\VectMode{w}}

%%% -Entropy, KL
%\renewcommand{\H}{H}
\newcommand{\KL}{\mathrm{KL}}
\newcommand{\HD}{\mathrm{H}}
\newcommand{\KLD}{\mathrm{KL}}
\newcommand{\TV}{\mathrm{TV}}
\newcommand{\RG}{\mathrm{RG}}

%%% RKHS
\newcommand{\Krkhs}{k}
\newcommand{\KrkhsD}{\VectMode{k}}

%%% Unbalanced
\DeclareMathOperator{\WFR}{WFR}

%%% Gaussian measure
\newcommand{\Gaussian}{\Nn}
\newcommand{\mean}{m}
\newcommand{\cov}{C}


%%% Sliced
\DeclareMathOperator{\SW}{SW}

%%% Gromov Wasserstein
\DeclareMathOperator{\GW}{\mathcal{GW}}
\DeclareMathOperator{\GWD}{\mathrm{GW}} % discrete


%%% Theory boxes
\usepackage{mdframed}

\mdfsetup{%
% middlelinecolor=red,
% middlelinewidth=2pt,
backgroundcolor=gray!5,
% roundcorner=10pt
}
\newcommand{\theoryNoTitle}[1]{\begin{mdframed}#1\end{mdframed}}
\newcommand{\theory}[2]{\theoryNoTitle{\textbf{#1.} #2}}

\mdfdefinestyle{mystyle}{backgroundcolor=gray!15}
\newcommand{\theoryHard}[2]{\begin{mdframed}[style=mystyle]\textbf{#1.} #2\end{mdframed}}

%%% Iterations 
\renewcommand{\it}[1]{#1^{(\ell)}}
\newcommand{\itt}[1]{#1^{(\ell+1)}}
\newcommand{\ittt}[1]{#1^{(\ell+2)}}
\newcommand{\init}[1]{#1^{(0)}}
